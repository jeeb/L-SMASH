language: c
compiler:
  - gcc
  - clang

before_install:
  - wget -O - http://llvm.org/apt/llvm-snapshot.gpg.key | sudo apt-key add -
  - sudo add-apt-repository -y "deb http://llvm.org/apt/precise/ llvm-toolchain-precise-3.4 main"
  - sudo add-apt-repository --yes ppa:ubuntu-toolchain-r/test
  - sudo apt-get update -qq
  - sudo apt-get install -q
    gcc-4.8
    g++-4.8
    libstdc++-4.8-dev
    clang-3.4
  - sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.8 40
    --slave /usr/bin/g++ g++ /usr/bin/g++-4.8
  - sudo update-alternatives --config gcc

env:
  global:
   # The next declration is the encrypted COVERITY_SCAN_TOKEN, created
   #   via the "travis encrypt" command using the project repo's public key
   - secure: "QW3xNY/GjgFFhs/X6iG8xx5UoHce6figfWrywoV+1hPGOInpEcJNtWFOIO+DkHsy6JoaHJ8PvkUt+iY+dKoJx9EuTHz5pFm69KwNVM4lesESRC2urGaOKhBNZsg6k2EOX91QaaqRdHJ8Vl/yY8UXMNqMK6VP5aScnUVxJG0cBpE="

addons:
  coverity_scan:
    project:
      name: "jeeb/L-SMASH"
      description: "L-SMASH test repo"
    notification_email: jeebjp@gmail.com
    build_command_prepend: "./configure --cc=$CC"
    build_command: "make"
    branch_pattern: coverity_scan

# Change this to your needs
script: clang --version && ./configure --cc=$CC && make
